# テストデータ

**システム名：iLスクエア予約システム**　　　　　　　　　　　　　　　　　　　　**2025年6月14日**

---

## User（ユーザーデータ）- 実装済み

| id | username | first_name | last_name | email | phone_number | is_active | date_joined | 実装状況 |
|----|----------|------------|-----------|-------|--------------|-----------|-------------|----------|
| 1 | tanaka01 | 一郎 | 田中 | tanaka@example.com | 090-1234-5678 | True | 2025-06-01 10:00:00 | ✅完了 |
| 2 | sato02 | 花子 | 佐藤 | sato@example.com | 080-2345-6789 | True | 2025-06-02 14:30:00 | ✅完了 |
| 3 | yamada03 | 太郎 | 山田 | yamada@example.com | 070-3456-7890 | True | 2025-06-03 09:15:00 | ✅完了 |
| 4 | suzuki04 | 美咲 | 鈴木 | suzuki@example.com | 090-4567-8901 | True | 2025-06-04 16:45:00 | ✅完了 |
| 5 | takahashi05 | 健太 | 高橋 | takahashi@example.com | 080-5678-9012 | True | 2025-06-05 11:20:00 | ✅完了 |
| 6 | kobayashi06 | 絵美 | 小林 | kobayashi@example.com | 070-6789-0123 | False | 2025-06-06 13:10:00 | ✅完了 |

---

## Space（スペースデータ）- 実装済み

| id | name | space_type | capacity | equipment | hourly_rate | description | is_available | 実装状況 |
|----|------|------------|----------|-----------|-------------|-------------|--------------|----------|
| 1 | 半個室A | SEMI_PRIVATE | 1 | PC、モニター、ヘッドセット | 500 | 静かな環境での集中作業に最適 | True | ✅完了 |
| 2 | 半個室B | SEMI_PRIVATE | 1 | PC、モニター、ヘッドセット | 500 | オープンスペースに近い半個室 | True | ✅完了 |
| 3 | 半個室C | SEMI_PRIVATE | 1 | PC、モニター、ヘッドセット | 500 | 窓際の明るいスペース | True | ✅完了 |
| 4 | 半個室D | SEMI_PRIVATE | 1 | PC、モニター、ヘッドセット | 500 | コンパクトで使いやすいスペース | True | ✅完了 |
| 5 | 完全個室A | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | 完全プライベート空間 | True | ✅完了 |
| 6 | 完全個室B | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | 会議にも利用可能 | True | ✅完了 |
| 7 | 完全個室C | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | 広めの作業デスク | True | ✅完了 |
| 8 | 完全個室D | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | 防音性に優れた個室 | True | ✅完了 |
| 9 | 完全個室E | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | プレゼン資料作成に最適 | True | ✅完了 |
| 10 | 完全個室F | PRIVATE | 1 | PC、モニター、ヘッドセット、ホワイトボード | 1000 | 重要な会議での利用推奨 | False | ✅完了 |

---

## Reservation（予約データ）- 実装済み

| id | user_id | space_id | reservation_date | start_time | end_time | purpose | status | total_amount | created_at | 実装状況 |
|----|---------|----------|------------------|------------|----------|---------|--------|--------------|------------|----------|
| 1 | 1 | 1 | 2025-06-16 | 09:00:00 | 11:00:00 | プレゼン資料作成 | CONFIRMED | 1000 | 2025-06-14 10:30:00 | ✅完了 |
| 2 | 2 | 5 | 2025-06-16 | 13:00:00 | 15:00:00 | オンライン会議 | CONFIRMED | 2000 | 2025-06-14 11:15:00 | ✅完了 |
| 3 | 3 | 2 | 2025-06-17 | 10:00:00 | 12:00:00 | システム開発作業 | CONFIRMED | 1000 | 2025-06-14 14:20:00 | ✅完了 |
| 4 | 4 | 6 | 2025-06-17 | 14:00:00 | 16:00:00 | 企画書作成 | CONFIRMED | 2000 | 2025-06-14 15:45:00 | ✅完了 |
| 5 | 5 | 3 | 2025-06-18 | 09:00:00 | 10:00:00 | メール対応 | CONFIRMED | 500 | 2025-06-14 16:30:00 | ✅完了 |
| 6 | 1 | 7 | 2025-06-18 | 15:00:00 | 17:00:00 | クライアント打ち合わせ | CONFIRMED | 2000 | 2025-06-14 17:10:00 | ✅完了 |
| 7 | 2 | 4 | 2025-06-19 | 11:00:00 | 12:00:00 | 資料整理 | CONFIRMED | 500 | 2025-06-15 09:20:00 | ✅完了 |
| 8 | 3 | 8 | 2025-06-19 | 13:00:00 | 15:00:00 | ビデオ会議 | CONFIRMED | 2000 | 2025-06-15 10:05:00 | ✅完了 |
| 9 | 4 | 1 | 2025-06-20 | 10:00:00 | 11:00:00 | 学習・研修 | CANCELLED | 500 | 2025-06-15 11:40:00 | ✅完了 |
| 10 | 5 | 9 | 2025-06-20 | 16:00:00 | 18:00:00 | プロジェクト計画 | CONFIRMED | 2000 | 2025-06-15 13:25:00 | ✅完了 |

---

## Payment（支払いデータ）- 実装済み

| id | reservation_id | amount | payment_method | payment_status | transaction_id | paid_at | 実装状況 |
|----|----------------|--------|----------------|----------------|----------------|---------|----------|
| 1 | 1 | 1000 | CASH | COMPLETED | TXN_202506140001 | 2025-06-14 10:35:00 | ✅完了 |
| 2 | 2 | 2000 | PAYPAY | COMPLETED | TXN_202506140002 | 2025-06-14 11:20:00 | ✅完了 |
| 3 | 3 | 1000 | CASH | COMPLETED | TXN_202506140003 | 2025-06-14 14:25:00 | ✅完了 |
| 4 | 4 | 2000 | PAYPAY | PENDING | TXN_202506140004 | NULL | ✅完了 |
| 5 | 5 | 500 | CASH | COMPLETED | TXN_202506140005 | 2025-06-14 16:35:00 | ✅完了 |
| 6 | 6 | 2000 | PAYPAY | COMPLETED | TXN_202506140006 | 2025-06-14 17:15:00 | ✅完了 |
| 7 | 7 | 500 | CASH | COMPLETED | TXN_202506150001 | 2025-06-15 09:25:00 | ✅完了 |
| 8 | 8 | 2000 | CASH | COMPLETED | TXN_202506150002 | 2025-06-15 10:10:00 | ✅完了 |
| 9 | 9 | 0 | - | CANCELLED | - | NULL | ✅完了 |
| 10 | 10 | 2000 | PAYPAY | PENDING | TXN_202506150003 | NULL | ✅完了 |

---

## テストケース別データ（実装完了版）

### 1. 正常系テスト用データ（実装済み）

#### ユーザー登録テスト
- **テストユーザーID**: testuser01
- **パスワード**: TestPass123!
- **氏名**: テスト 太郎
- **メールアドレス**: testuser@example.com（必須）
- **電話番号**: 090-0000-0000
- **実装状況**: ✅完了

#### ログインテスト
- **有効なユーザー**: tanaka01 / password123
- **無効なユーザー**: invaliduser / wrongpass
- **実装状況**: ✅完了

#### 3ステップ予約申込テスト
- **ステップ1**: 2025-06-21（日付選択）
- **ステップ2**: 半個室A（space_id: 1）・14:00（開始時刻選択）
- **ステップ2.5**: 15:00（終了時刻選択）
- **ステップ3**: 予約確認・利用目的入力
- **期待料金**: 500円
- **実装状況**: ✅完了

### 2. 異常系テスト用データ（実装済み）

#### 重複予約テスト
- **既存予約**: 2025-06-16 09:00-11:00 半個室A
- **重複予約試行**: 2025-06-16 10:00-12:00 半個室A
- **期待結果**: エラー「選択した時間は既に予約されています」
- **実装状況**: ✅完了

#### 無効な日時テスト
- **土日祝日予約**: 2025-06-21（土）・2025-06-22（日）→ エラー
- **営業時間外**: 08:00-09:00・18:01-19:00 → エラー
- **過去日付**: 2025-06-13 → エラー
- **実装状況**: ✅完了

#### 存在しないスペース
- **無効なspace_id**: 999
- **期待結果**: 404エラー
- **実装状況**: ✅完了

#### メールアドレス未入力テスト
- **条件**: 新規登録時にメールアドレス未入力
- **期待結果**: エラー「メールアドレスは必須です」
- **実装状況**: ✅完了

### 3. 境界値テスト用データ（実装済み）

#### 予約時間
- **最短時間**: 1時間（09:00-10:00）
- **最長時間**: 9時間（09:00-18:00）
- **営業開始**: 09:00-10:00
- **営業終了**: 17:00-18:00
- **実装状況**: ✅完了

#### 料金計算（整数表示統一）
- **半個室1時間**: 500円
- **完全個室1時間**: 1000円
- **半個室2時間**: 1000円
- **完全個室3時間**: 3000円
- **実装状況**: ✅完了

#### 支払方法テスト
- **現金支払い**: CASH選択時の処理
- **PayPay支払い**: PAYPAY選択時の処理
- **実装状況**: ✅完了

---

## 実装済みデータ作成方法

### Django管理コマンド（実装済み）
```bash
# サンプルデータ一括作成
python manage.py create_sample_data

# またはuv使用時
uv run python manage.py create_sample_data
```

### 手動データ投入SQL（参考）
```sql
-- ユーザーデータ投入（メールアドレス必須対応）
INSERT INTO auth_user (username, first_name, last_name, email, phone_number, is_active, date_joined) VALUES
('tanaka01', '一郎', '田中', 'tanaka@example.com', '090-1234-5678', TRUE, '2025-06-01 10:00:00'),
('sato02', '花子', '佐藤', 'sato@example.com', '080-2345-6789', TRUE, '2025-06-02 14:30:00');

-- スペースデータ投入（整数料金対応）
INSERT INTO reservation_space (name, space_type, capacity, equipment, hourly_rate, description, is_available) VALUES
('半個室A', 'SEMI_PRIVATE', 1, 'PC、モニター、ヘッドセット', 500, '静かな環境での集中作業に最適', TRUE),
('完全個室A', 'PRIVATE', 1, 'PC、モニター、ヘッドセット、ホワイトボード', 1000, '完全プライベート空間', TRUE);
```

---

## 実装時の主要変更点

### 1. データ型の統一
- **金額フィールド**: DecimalFieldから整数表示への変換
- **メールアドレス**: 必須フィールド化
- **支払方法**: CASH・PAYPAYのみに変更

### 2. テストデータの拡張
- **3ステップフロー**: 各ステップでの検証データ追加
- **エラーケース**: 包括的な異常系テストデータ
- **境界値**: 営業時間・料金計算の境界値追加

### 3. 自動化対応
- **管理コマンド**: create_sample_dataコマンド実装
- **一括作成**: ユーザー・スペース・予約データ一括生成
- **整合性**: データ間の関連性を保証

---

## 改定履歴

| 項番 | 分類 | 担当者 | 説明 |
|------|------|--------|------|
| 1 | 新規 | 高橋健太 | 初版作成 |
| 2 | 実装完了版 | 田中一郎 | 実装完了に合わせた全面改訂・3ステップフロー対応・支払方法変更 |

---

**作成者：Aチーム**　　　　　　　　　　　　　　　　　　　　　　　　　　**承認者：田中一郎**